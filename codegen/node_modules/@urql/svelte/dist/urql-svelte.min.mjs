import{createRequest as e,Client as t}from"@urql/core";export*from"@urql/core";import{make as r,subscribe as a,scan as o,switchMap as n,never as i,concat as s,fromValue as u,map as c}from"wonka";import{writable as l,derived as p}from"svelte/store";import{getContext as f,setContext as d}from"svelte";var q=e=>r((t=>e.subscribe(t.next))),v={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0},x=e=>({isPaused$:e,pause(){e.set(!0)},resume(){e.set(!1)}});function b(t){var r=e(t.query,t.variables),f={requestPolicy:t.requestPolicy,...t.context},d=t.client.createRequestOperation("query",r,f),b={...v,operation:d},m=l(b,(()=>h.unsubscribe)),g=l(!!t.pause),h=a((e=>{m.set(e)}))(o(((e,t)=>({...e,...t})),b)(n((e=>e?i:s([u({fetching:!0,stale:!1}),c((({stale:e,data:t,error:r,extensions:a,operation:o})=>({fetching:!1,stale:!!e,data:t,error:r,operation:o,extensions:a})))(t.client.executeRequestOperation(d)),u({fetching:!1})])))(q(g))));return{...p(m,((e,t)=>{t(e)})),...x(g)}}function m(t,r){var n=e(t.query,t.variables),i=t.client.createRequestOperation("mutation",n,t.context),s={...v,operation:i,fetching:!0},u=l(s),f=a((e=>{u.set(e)}))(o(((e,t)=>{var a=void 0!==t.data?"function"==typeof r?r(e.data,t.data):t.data:e.data;return{...e,...t,data:a}}),s)(c((({stale:e,data:t,error:r,extensions:a,operation:o})=>({fetching:!1,stale:!!e,data:t,error:r,operation:o,extensions:a})))(t.client.executeRequestOperation(i))));return p(u,((e,t)=>(t(e),f.unsubscribe)))}function g(t){var r=e(t.query,t.variables),f=t.client.createRequestOperation("subscription",r,t.context),d={...v,operation:f},b=l(d,(()=>g.unsubscribe)),m=l(!!t.pause),g=a((e=>{b.set(e)}))(o(((e,t)=>({...e,...t})),d)(n((e=>e?i:s([u({fetching:!0,stale:!1}),c((({stale:e,data:t,error:r,extensions:a,operation:o})=>({fetching:!0,stale:!!e,data:t,error:r,operation:o,extensions:a})))(t.client.executeRequestOperation(f)),u({fetching:!1})])))(q(m))));return{...p(b,((e,t)=>{t(e)})),...x(m)}}var h=()=>f("$$_urql"),y=e=>{d("$$_urql",e)},O=e=>{var r=new t(e);return y(r),r};export{h as getContextClient,O as initContextClient,m as mutationStore,b as queryStore,y as setContextClient,g as subscriptionStore};
//# sourceMappingURL=urql-svelte.min.mjs.map
