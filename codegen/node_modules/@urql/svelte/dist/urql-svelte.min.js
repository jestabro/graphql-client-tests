Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@urql/core"),t=require("wonka"),r=require("svelte/store"),a=require("svelte"),n=e=>t.make((t=>e.subscribe(t.next))),o={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0},i=e=>({isPaused$:e,pause(){e.set(!0)},resume(){e.set(!1)}}),s=e=>{a.setContext("$$_urql",e)};exports.getContextClient=()=>a.getContext("$$_urql"),exports.initContextClient=t=>{var r=new e.Client(t);return s(r),r},exports.mutationStore=function(a,n){var i=e.createRequest(a.query,a.variables),s=a.client.createRequestOperation("mutation",i,a.context),u={...o,operation:s,fetching:!0},c=r.writable(u),l=t.subscribe((e=>{c.set(e)}))(t.scan(((e,t)=>{var r=void 0!==t.data?"function"==typeof n?n(e.data,t.data):t.data:e.data;return{...e,...t,data:r}}),u)(t.map((({stale:e,data:t,error:r,extensions:a,operation:n})=>({fetching:!1,stale:!!e,data:t,error:r,operation:n,extensions:a})))(a.client.executeRequestOperation(s))));return r.derived(c,((e,t)=>(t(e),l.unsubscribe)))},exports.queryStore=function(a){var s=e.createRequest(a.query,a.variables),u={requestPolicy:a.requestPolicy,...a.context},c=a.client.createRequestOperation("query",s,u),l={...o,operation:c},p=r.writable(l,(()=>d.unsubscribe)),b=r.writable(!!a.pause),d=t.subscribe((e=>{p.set(e)}))(t.scan(((e,t)=>({...e,...t})),l)(t.switchMap((e=>e?t.never:t.concat([t.fromValue({fetching:!0,stale:!1}),t.map((({stale:e,data:t,error:r,extensions:a,operation:n})=>({fetching:!1,stale:!!e,data:t,error:r,operation:n,extensions:a})))(a.client.executeRequestOperation(c)),t.fromValue({fetching:!1})])))(n(b))));return{...r.derived(p,((e,t)=>{t(e)})),...i(b)}},exports.setContextClient=s,exports.subscriptionStore=function(a){var s=e.createRequest(a.query,a.variables),u=a.client.createRequestOperation("subscription",s,a.context),c={...o,operation:u},l=r.writable(c,(()=>b.unsubscribe)),p=r.writable(!!a.pause),b=t.subscribe((e=>{l.set(e)}))(t.scan(((e,t)=>({...e,...t})),c)(t.switchMap((e=>e?t.never:t.concat([t.fromValue({fetching:!0,stale:!1}),t.map((({stale:e,data:t,error:r,extensions:a,operation:n})=>({fetching:!0,stale:!!e,data:t,error:r,operation:n,extensions:a})))(a.client.executeRequestOperation(u)),t.fromValue({fetching:!1})])))(n(p))));return{...r.derived(l,((e,t)=>{t(e)})),...i(p)}},Object.keys(e).forEach((function(t){"default"===t||exports.hasOwnProperty(t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})}));
//# sourceMappingURL=urql-svelte.min.js.map
